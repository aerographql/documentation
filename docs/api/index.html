<!DOCTYPE html>
<html>
    <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="This is the documentation of AeroGraphQL. AeroGraphQL is an opinionated Typescript framework to create GraphQL server using a declarative approach.">
  <meta name="keyword" content="node graphql typescript aerographql documentation doc">
  <link rel="shortcut icon" type="image/ico" href="/documentation/images/logo-favicon.png"/> 
  <title>
    
      Api reference | Aerographql documentation
    
  </title>
  <link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet">
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/documentation/css/style.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
</head>


    <body>
        <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/documentation/">
      <img src="/documentation/images/logo-full.png">
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/documentation/" class="item-link">
                Home
                
            </a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/documentation/docs/" class="item-link">
                Documentations
                
            </a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/documentation/api/" class="item-link">
                Api
                
            </a>
          
        </li>
      
        <li class="list-item">
          
            <a href="https://github.com/aerographql" class="item-link">
                Github
                
                    <i>
                        <img src="/documentation/images/logo-github.png">
                    </i>
                
            </a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/documentation/" class="menu-link">
                  Home
                  
              </a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/documentation/docs/" class="menu-link">
                  Documentations
                  
              </a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/documentation/api/" class="menu-link">
                  Api
                  
              </a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="https://github.com/aerographql" class="menu-link">
                  Github
                  
                    <i>
                        <img src="/documentation/images/logo-github.png">
                    </i>
                  
              </a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

        
<div id="article-banner-spacer"></div>

<main class="app-body flex-box">
    <article class="post-article">
        <section class="markdown-content">
            <h1 id="Public-API"><a href="#Public-API" class="headerlink" title="Public API"></a>Public API</h1><h2 id="Decorators"><a href="#Decorators" class="headerlink" title="Decorators"></a>Decorators</h2><h3 id="Arg"><a href="#Arg" class="headerlink" title="@Arg"></a>@Arg</h3><p><code>@Arg( config: ArgConfig )</code></p>
<p>Apply this decorator to a <strong>@Resolver</strong> ‘s parameter to associate it  with a GraphQL argument on the field defined by the resolver.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface ArgConfig &#123;</span><br><span class="line">    nullable?: Boolean;</span><br><span class="line">    list?: boolean;</span><br><span class="line">    type?: string | Function;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>nullable:</strong> Define whether this argument is nullable or not.<br><em>Default to false</em></p>
</li>
<li><p><strong>list:</strong> Define whether this argument is a list or not.<br><em>Default value is infered by looking at the type of the parameter where this decorator is applied on, using Typescript metadata.</em></p>
</li>
<li><p><strong>type:</strong> Define the type of this argument.<br>If a string is provided, it must match a name of a GraphQL object available in the final schema.<br><em>Default to the type of the function parameter infered from Typescript metadata</em></p>
</li>
</ul>
<h3 id="Field"><a href="#Field" class="headerlink" title="@Field"></a>@Field</h3><p><code>@Field( config: FieldConfig )</code></p>
<p>Apply this decorator on a member of a class decorated with <strong>@ObjectDefinition</strong> to associate it with a GraphQL field on the object.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface FieldConfig &#123;</span><br><span class="line">    nullable?: Boolean</span><br><span class="line">    type?: string | Function</span><br><span class="line">    description?: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>nullable:</strong> Define whether this field is nullable or not.<br><em>Default to false</em></p>
</li>
<li><p><strong>type:</strong> Define the type of this field.<br>If a string is provided it must match a name of a GraphQL object available in the final schema.<br><em>Default to the type of the attribute infered from Typescript metadata</em></p>
</li>
<li><p><strong>description:</strong> Description associated with this GraphQL field.<br><em>Default to null</em></p>
</li>
</ul>
<h3 id="Inject"><a href="#Inject" class="headerlink" title="@Inject"></a>@Inject</h3><p><code>@Inject( token: string )</code></p>
<p>Apply this decorator on class constructor’ s parameter to explicitly define the token that will be used to lookup the dependency in the Injector.</p>
<p><strong>example:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class MyService &#123;</span><br><span class="line">    constructor( @Inject( &apos;MongoDBUserService&apos; ) private userService: UserService ) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>In this case the DI system will look for a dependency identified by the <strong>MongoDBUserService</strong> token and inject it for the <strong>userService</strong> parameter</p>
<h3 id="Injectable"><a href="#Injectable" class="headerlink" title="@Injectable"></a>@Injectable</h3><p><code>@Injectable( )</code></p>
<p>Apply this decorator on a class to tag to make it injectable within the dependency injection system.  </p>
<h3 id="InputObject"><a href="#InputObject" class="headerlink" title="@InputObject"></a>@InputObject</h3><p><code>@InputObject( config: InputObjectConfig )</code></p>
<p>Apply this decorator on a class to create a new GraphQL input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface InputObjectConfig &#123;</span><br><span class="line">    name?: string;</span><br><span class="line">    description?: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>name:</strong> Name of this input in the GraphQL schema<br><em>Default to the name of the class decorated</em></p>
</li>
<li><p><strong>description:</strong> Description associated with this GraphQL input.<br><em>Default to null</em></p>
</li>
</ul>
<h3 id="Interface"><a href="#Interface" class="headerlink" title="@Interface"></a>@Interface</h3><p><code>@Interface( config: InterfaceConfig )</code></p>
<p>Apply this decorator on a class to create a new GraphQL interface</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface InterfaceConfig &#123;</span><br><span class="line">    name?: string;</span><br><span class="line">    description?: string;</span><br><span class="line">    resolveType?: ResolveTypeFunction;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type ResolveTypeFunction = ( value: any, context: any, info: any ) =&gt; string;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>name:</strong> Name of this interface in the GraphQL schema<br><em>Default to the name of the class decorated</em></p>
</li>
<li><p><strong>description:</strong> Description associated with this GraphQL interface.<br><em>Default to null</em></p>
</li>
<li><p><strong>resolveType:</strong> GraphQL use a custom logic to deduce the type of an object when a field return a polymorphic type (like an interface). (see <a href="http://localhost:4000/documentation/interface-and-union/#How-does-it-work" target="_blank" rel="noopener">this</a>)<br>However if this logic does not suit your needs you can override it by providing this callback.<br>It’s role is to convert an input value to a string corresponding to the GraphQL object type name.<br><em>Default to null</em></p>
</li>
</ul>
<h3 id="Middleware"><a href="#Middleware" class="headerlink" title="@Middleware"></a>@Middleware</h3><p><code>@Middleware( )</code></p>
<p>Apply this decorator on a class to tag it as an AeroGraphQL middleware.  </p>
<p><em>Any class decorated with <strong>@Schema</strong> must implement the MiddlewareInterface interface.</em></p>
<h3 id="ObjectDefinition"><a href="#ObjectDefinition" class="headerlink" title="@ObjectDefinition"></a>@ObjectDefinition</h3><p><code>@ObjectDefinition( config: ObjectDefinitionConfig )</code></p>
<p>Apply this decorator on a class to create a new GraphQL object with only fields.<br>Or to add fields to an existing GraphQL object with the same name.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface ObjectDefinitionConfig &#123;</span><br><span class="line">    name?: string;</span><br><span class="line">    description?: string;</span><br><span class="line">    implements?: Function[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>name:</strong> Name of the GraphQL object this class refers to<br><em>Default to the name of the class decorated</em></p>
</li>
<li><p><strong>description:</strong> Description associated with this GraphQL object.<br><em>Default to null</em></p>
</li>
<li><p><strong>implements:</strong> Specify which GraphQL interface this object implement.<br><em>Default to []</em></p>
</li>
</ul>
<h3 id="ObjectImplementation"><a href="#ObjectImplementation" class="headerlink" title="@ObjectImplementation"></a>@ObjectImplementation</h3><p><code>@ObjectImplementation( config: ObjectImplementationConfig )</code></p>
<p>Apply this decorator on a class to create a new GraphQL object with only resolvers.<br>Or to add resolvers to an existing GraphQL object with the same name.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface ObjectDefinitionConfig &#123;</span><br><span class="line">    name?: string;</span><br><span class="line">    description?: string;</span><br><span class="line">    implements?: Function[];</span><br><span class="line">    middlewares?: MiddlewareDescriptor[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export interface MiddlewareDescriptor &#123;</span><br><span class="line">    provider: Function;</span><br><span class="line">    options?: any;</span><br><span class="line">    resultName?: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>name:</strong> Name of the GraphQL object this class refers to<br><em>Default to the name of the class decorated</em></p>
</li>
<li><p><strong>description:</strong> Description associated with this GraphQL object.<br><em>Default to null</em></p>
</li>
<li><p><strong>implements:</strong> Specify which GraphQL interface this object implement.<br><em>Default to []</em></p>
</li>
<li><p><strong>middlewares:</strong> List of middleware that must be called before executing a resolver in thi ObjectImplementation.<br><em>Default to []</em></p>
<ul>
<li><strong>provider</strong> is the class constructor for the desired middleware  </li>
<li><strong>options</strong> Option passed to the middleware  </li>
<li><strong>resultName</strong> A field name reachable in the GraphQL context, where the result of this middleware will be stored   </li>
</ul>
</li>
</ul>
<h3 id="Resolver"><a href="#Resolver" class="headerlink" title="@Resolver"></a>@Resolver</h3><p><code>@Resolver( config: ResolverConfig )</code></p>
<p>Apply this decorator on a method of a class decorated with <strong>@ObjectImplementation</strong> to associate it with a GraphQL resolver on the object.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface ResolverConfig &#123;</span><br><span class="line">    type?: string | Function,</span><br><span class="line">    nullable?: boolean,</span><br><span class="line">    list?: boolean,</span><br><span class="line">    description?: string,</span><br><span class="line">    middlewares?: MiddlewareDescriptor[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>type:</strong> Define the return value type of this resolver.<br>If a string is provided it must match a name of a GraphQL object available in the final schema.<br>A reference to a AeroGraphQL annotated class can be passed.<br><em>Default to the type of the attribute infered from Typescript metadata</em></p>
</li>
<li><p><strong>nullable:</strong> Define whether this field is nullable or not.<br><em>Default to false</em></p>
</li>
<li><p><strong>list:</strong> Description whether this field is a list or not.<br><em>Default value is infered by looking at the type of the return value of this function using Typescript metadata.</em></p>
</li>
<li><p><strong>description:</strong> Description associated with this GraphQL resolver.<br><em>Default to null</em></p>
</li>
<li><p><strong>middlewares:</strong> List of middleware that must be called before executing this Resolver.<br>If middleware were defined at the ObjectImplementation level, they will be overided by those one.<br><em>Default to []</em></p>
</li>
</ul>
<h3 id="Scalar"><a href="#Scalar" class="headerlink" title="@Scalar"></a>@Scalar</h3><p><code>@Scalar( config: ScalarConfig )</code></p>
<p>Apply this decorator on a class to create a new GraphQL scalar.  </p>
<p><em>Any class decorated with <strong>@Scalar</strong> must implement the <strong>ScalarInterface</strong> interface.</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface ScalarConfig &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    description?: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>name:</strong> Name of this scalar in the GraphQL schema<br><em>Default to the name of the class decorated</em></p>
</li>
<li><p><strong>description:</strong> Description associated with this GraphQL scalar.<br><em>Default to null</em></p>
</li>
</ul>
<h3 id="Schema"><a href="#Schema" class="headerlink" title="@Schema"></a>@Schema</h3><p><code>@Schema( config: SchemaConfig )</code></p>
<p>Apply this decorator on a class to create a new GraphQL schema.  </p>
<p><em>Any class decorated with <strong>@Schema</strong> must extends the BaseSchema class.</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface SchemaConfig &#123;</span><br><span class="line">    rootQuery: string,</span><br><span class="line">    rootMutation?: string,</span><br><span class="line">    providers?: ( Function | Provider )[],</span><br><span class="line">    components: Function[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>rootQuery:</strong> Name of the GraphQL object used as the root query.</p>
</li>
<li><p><strong>rootMutation:</strong> Name of the GraphQL object used as the root mutation.<br><em>Default to null</em></p>
</li>
<li><p><strong>providers:</strong> Additional providers that must be added to the injector stored in this schema. See <a href="http://localhost:4000/documentation/dependency-injection/#Configure-the-injector" target="_blank" rel="noopener">this</a><br><em>Default to []</em></p>
</li>
<li><p><strong>components:</strong> List of reference to decorated class that are part of this schema.</p>
</li>
</ul>
<h3 id="Union"><a href="#Union" class="headerlink" title="@Union"></a>@Union</h3><p><code>@Union( config: UnionConfig )</code></p>
<p>Apply this decorator on a class to create a new GraphQL union.  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface UnionConfig &#123;</span><br><span class="line">    name?: string;</span><br><span class="line">    types: Function[];</span><br><span class="line">    description?: string;</span><br><span class="line">    resolveType?: ResolveTypeFunction;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>name:</strong> Name of this union in the GraphQL schema<br><em>Default to the name of the class decorated</em></p>
</li>
<li><p><strong>types:</strong> List of reference to class that are members of this union</p>
</li>
<li><p><strong>description:</strong> Description associated with this GraphQL union.<br><em>Default to null</em></p>
</li>
<li><p><strong>resolveType:</strong> GraphQL use a custom logic to deduce the type of an object when a field return a polymorphic type (such as an union). (see <a href="http://localhost:4000/documentation/interface-and-union/#How-does-it-work" target="_blank" rel="noopener">this</a>)<br>However if this logic does not suit your needs you can override it by providing this callback.<br>It’s role is to convert an input value to a string corresponding to the GraphQL object type name.<br><em>Default to null</em></p>
</li>
</ul>
<h2 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h2><h3 id="MiddlewareInterface"><a href="#MiddlewareInterface" class="headerlink" title="MiddlewareInterface"></a>MiddlewareInterface</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> MiddlewareInterface&lt;T=any&gt; &#123;</span><br><span class="line">    execute( src: <span class="built_in">any</span>, args: <span class="built_in">any</span>, context: <span class="built_in">any</span>, options: <span class="built_in">any</span> ): T | <span class="built_in">Promise</span>&lt;T&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ScalarInterface"><a href="#ScalarInterface" class="headerlink" title="ScalarInterface"></a>ScalarInterface</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ScalarInterface &#123;</span><br><span class="line">    parseValue: <span class="function">(<span class="params"> value: <span class="built_in">any</span> </span>) =&gt;</span> <span class="built_in">any</span>;</span><br><span class="line">    serialize: <span class="function">(<span class="params"> value: <span class="built_in">any</span> </span>) =&gt;</span> <span class="built_in">any</span>;</span><br><span class="line">    parseLiteral: <span class="function">(<span class="params"> ast: ASTNode </span>) =&gt;</span> <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Any class decorated with <strong>@Scalar</strong> must implement this interface.</p>
<p>See <a href="https://medium.com/graphql-mastery/how-to-design-graphql-queries-and-mutations-part-3-custom-scalars-78d441869258" target="_blank" rel="noopener">this medium post</a> to learn more about how to implement those methods.</p>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><h3 id="BaseSchema"><a href="#BaseSchema" class="headerlink" title="BaseSchema"></a>BaseSchema</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> BaseSchema &#123;</span><br><span class="line">    rootInjector: Injector;</span><br><span class="line">    graphQLSchema: GraphQLSchema;</span><br><span class="line">    toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Any class decorated with <strong>@Schema</strong> must derive from this base class.<br>After instanciation of a class deriving from <strong>BaseSchema</strong>, the user will have access to:</p>
<ul>
<li><strong>rootInjector</strong> : The internal Injector stored in this schema</li>
<li><strong>graphQLSchema</strong> : The standard GraphQL schema that can be later on used by any GraphQL compliant server </li>
</ul>
<h1 id="Test-API"><a href="#Test-API" class="headerlink" title="Test API"></a>Test API</h1><h2 id="Class-1"><a href="#Class-1" class="headerlink" title="Class"></a>Class</h2><h3 id="TestServer"><a href="#TestServer" class="headerlink" title="TestServer"></a>TestServer</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> TestServer &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"> schema: BaseSchema, context: <span class="built_in">any</span> = <span class="literal">null</span> </span>);</span><br><span class="line">    execute&lt;T = any&gt;(<span class="params"> query: <span class="built_in">string</span>, vars: <span class="built_in">any</span> = <span class="literal">null</span>, operationName: <span class="built_in">string</span> = <span class="literal">null</span> </span>) : Promise&lt;T&gt; ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Use this class to write end-to-end test for a given GraphQL query.  </p>
<p><strong>example:</strong><br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">it( <span class="string">'should execute query correctly'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> schema = <span class="keyword">new</span> MySchema();</span><br><span class="line">    <span class="keyword">let</span> s = <span class="keyword">new</span> TestServer( schema );</span><br><span class="line">    <span class="keyword">let</span> q = <span class="string">`&#123; query &#123; fieldA fieldB &#125; &#125;`</span></span><br><span class="line">    <span class="keyword">return</span> expect( s.execute( q ) ).resolves.toEqual( &#123; data: &#123; query2: &#123; fieldA: <span class="number">0</span>, fieldB: <span class="number">0</span> &#125; &#125; &#125; );</span><br><span class="line">&#125; )</span><br></pre></td></tr></table></figure></p>
<h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><h3 id="createInjectable"><a href="#createInjectable" class="headerlink" title="createInjectable"></a>createInjectable</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function createInjectable&lt;T=any&gt;( ctr: Function, additionalProviders: ( Function | Provider )[] = [] ): T</span><br></pre></td></tr></table></figure>
<h3 id="executeMiddlewares"><a href="#executeMiddlewares" class="headerlink" title="executeMiddlewares"></a>executeMiddlewares</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ExecuteMiddlewaresArgs &#123;</span><br><span class="line">    source?: <span class="built_in">any</span>;</span><br><span class="line">    args?: <span class="built_in">any</span>;</span><br><span class="line">    context?: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function executeMiddlewares( descs: MiddlewareDescriptor[], args: ExecuteMiddlewaresArgs = &#123;&#125;, additionalProviders: ( Function | Provider )[] = [] ): Promise&lt;any[]&gt;</span><br></pre></td></tr></table></figure>
<p>Create and configure a middleware chain ready to be tested.</p>
<p><strong>example:</strong><br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">it( <span class="string">'should store middlewares results'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="meta">@Middleware</span>()</span><br><span class="line">    <span class="keyword">class</span> MA <span class="keyword">implements</span> MiddlewareInterface&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">        execute( src: <span class="built_in">any</span>, args: <span class="built_in">any</span>, context: <span class="built_in">any</span>, options: <span class="built_in">any</span> ) &#123; <span class="keyword">return</span> <span class="string">'A'</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> descs: MiddlewareDescriptor[] = [</span><br><span class="line">        &#123; provider: MA,  resultName: <span class="string">'A'</span> &#125;</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">let</span> context: <span class="built_in">any</span> = &#123;&#125;;</span><br><span class="line">    <span class="keyword">let</span> p = executeMiddlewares( descs, &#123; context &#125; ).then( <span class="function">(<span class="params"> result </span>) =&gt;</span> &#123;</span><br><span class="line">        expect( context ).toEqual( &#123; A: <span class="string">'A'</span> &#125; );</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125; );</span><br><span class="line">    <span class="keyword">return</span> expect( p ).resolves.toBeTruthy();</span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure></p>

        </section>
    </article>
    
        <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Content</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Public-API"><span class="toc-nav-text">Public API</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Decorators"><span class="toc-nav-text">Decorators</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Arg"><span class="toc-nav-text">@Arg</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Field"><span class="toc-nav-text">@Field</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Inject"><span class="toc-nav-text">@Inject</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Injectable"><span class="toc-nav-text">@Injectable</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#InputObject"><span class="toc-nav-text">@InputObject</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Interface"><span class="toc-nav-text">@Interface</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Middleware"><span class="toc-nav-text">@Middleware</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ObjectDefinition"><span class="toc-nav-text">@ObjectDefinition</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ObjectImplementation"><span class="toc-nav-text">@ObjectImplementation</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Resolver"><span class="toc-nav-text">@Resolver</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Scalar"><span class="toc-nav-text">@Scalar</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Schema"><span class="toc-nav-text">@Schema</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Union"><span class="toc-nav-text">@Union</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Interfaces"><span class="toc-nav-text">Interfaces</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MiddlewareInterface"><span class="toc-nav-text">MiddlewareInterface</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ScalarInterface"><span class="toc-nav-text">ScalarInterface</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Class"><span class="toc-nav-text">Class</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#BaseSchema"><span class="toc-nav-text">BaseSchema</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Test-API"><span class="toc-nav-text">Test API</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Class-1"><span class="toc-nav-text">Class</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#TestServer"><span class="toc-nav-text">TestServer</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Function"><span class="toc-nav-text">Function</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#createInjectable"><span class="toc-nav-text">createInjectable</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#executeMiddlewares"><span class="toc-nav-text">executeMiddlewares</span></a></li></ol></li></ol></li></ol>
    
  </div>
</aside>

    
</main>

<script>
    (function () {
        

        // error image
        $(".markdown-content img").on('error', function () {
            $(this).attr('src', 'http://file.muyutech.com/error-img.png')
            $(this).css({
                'cursor': 'default'
            })
        })

        // zoom image
        $(".markdown-content img").on('click', function () {
            var src = $(this).attr('src')
            if (src !== 'http://file.muyutech.com/error-img.png') {
                var imageW = $(this).width()
                var imageH = $(this).height()

                var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
                zoom = zoom < 1 ? 1 : zoom
                zoom = zoom > 2 ? 2 : zoom
                var transY = (($(window).height() - imageH) / 2).toFixed(2)

                $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="' +
                    src + '" /></div></div>')
                $('.image-view-wrap').addClass('wrap-active')
                $('.image-view-wrap img').css({
                    'width': `${imageW}`,
                    'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
                })
                $('html').css('overflow', 'hidden')

                $('.image-view-wrap').on('click', function () {
                    $(this).remove()
                    $('html').attr('style', '')
                })
            }
        })

    })();
</script>

        <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
        <footer>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>

<script>
  var hasLine = 'true';
  async("//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<script src="/documentation/js/script.js"></script>

    </body>

</html>
